<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>iPad-Koffer Reservierung</title>
  <style>
    body { font-family: sans-serif; padding: 2em; background: #f4f4f4; }
    table { border-collapse: collapse; margin-top: 1em; }
    th, td { border: 1px solid #ccc; padding: 1em; text-align: center; }
    th { background: #e0e0e0; }
    th.koffer-gelb { color: goldenrod; }
    th.koffer-gruen { color: green; }
    th.koffer-blau  { color: blue; }
    th.koffer-rot   { color: red; }
    button { width: 100%; padding: 1em; font-size: 1em; }
    .reserviert { background-color: #ff4d4d; color: white; }
    #content { display: none; }
  </style>
</head>
<body>
  <div id="login">
    <h2>Passwort eingeben</h2>
    <input type="password" id="pw" placeholder="Passwort">
    <button onclick="checkPassword()">OK</button>
    <p id="error" style="color: red; display: none;">Falsches Passwort</p>
  </div>

  <div id="content">
    <h1>iPad-Koffer Reservierung</h1>

    <table>
      <thead>
        <tr>
          <th></th>
          <th class="koffer-gelb">Koffer Gelb</th>
          <th class="koffer-gruen">Koffer Grün</th>
          <th class="koffer-blau">Koffer Blau</th>
          <th class="koffer-rot">Koffer Rot</th>
        </tr>
      </thead>
      <tbody id="reservierungstabelle"></tbody>
    </table>
  </div>

  <script>
    function checkPassword() {
      const input = document.getElementById("pw").value;
      if (input === "sjs") {
        document.getElementById("login").style.display = "none";
        document.getElementById("content").style.display = "block";
        baueTabelle();
      } else {
        document.getElementById("error").style.display = "block";
      }
    }

    const zeilen = ["Sprachförderung", "1. Stunde", "2. Stunde", "3. Stunde", "4. Stunde"];
    const spalten = ["Gelb", "Grün", "Blau", "Rot"];
    const heute = new Date().toDateString();

    function ladeStatus() {
      let status = JSON.parse(localStorage.getItem("reservierungStatus")) || {};
      if (status.datum !== heute) {
        status = {
          datum: heute,
          belegung: Array(zeilen.length).fill(0).map(() => Array(spalten.length).fill(false))
        };
        localStorage.setItem("reservierungStatus", JSON.stringify(status));
      }
      return status;
    }

    function speichereStatus(status) {
      localStorage.setItem("reservierungStatus", JSON.stringify(status));
    }

    function baueTabelle() {
      const tbody = document.getElementById("reservierungstabelle");
      tbody.innerHTML = "";
      const status = ladeStatus();

      zeilen.forEach((zeilenName, zeilenIndex) => {
        const tr = document.createElement("tr");
        const th = document.createElement("th");
        th.textContent = zeilenName;
        tr.appendChild(th);

        spalten.forEach((_, spaltenIndex) => {
          const td = document.createElement("td");
          const btn = document.createElement("button");

          const reserviert = status.belegung[zeilenIndex][spaltenIndex];
          btn.textContent = reserviert ? "Reserviert" : "Frei";
          if (reserviert) btn.classList.add("reserviert");

          btn.onclick = () => {
            status.belegung[zeilenIndex][spaltenIndex] = !reserviert;
            speichereStatus(status);
            baueTabelle();
          };

          td.appendChild(btn);
          tr.appendChild(td);
        });

        tbody.appendChild(tr);
      });
    }
  </script>
</body>
</html>
